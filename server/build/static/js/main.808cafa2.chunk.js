(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{100:function(e,t,a){},134:function(e,t){},153:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(78),s=a.n(c),o=(a(98),a(3)),l=a.n(o),i=a(8),u=a(4),m=(a(100),a(39)),d=a.n(m),p=a(165),f=a(79),g=a.n(f),h=function(e){return r.a.createElement("button",{className:[g.a.Btn,e.className].join(" "),onClick:e.onClick},e.children)},_=a(28),E=a(21),b=a.n(E),v=a(15),j=a(33),O=a.n(j),y=function(e){return r.a.createElement(v.b,{to:"/".concat(e.name),className:b.a.Usr},r.a.createElement("div",{className:b.a.UsrPic},e.active?r.a.createElement("div",{className:b.a.UsrPicActive}):null,r.a.createElement("img",{src:O.a,alt:"",className:b.a.UsrPic})),r.a.createElement("div",{className:b.a.MsgUser},r.a.createElement("p",{className:b.a.MsgUserName},e.name),e.msg?r.a.createElement("p",{className:b.a.MsgUserMsg},"".concat(e.msg.slice(0,5),"...")):null))},C=a(51),w=a.n(C),S=function(e){return r.a.createElement("div",{className:w.a.Container},r.a.createElement("h2",{className:w.a.ContainerTitle},e.title),e.children)},x=a(81),N=a.n(x).a.connect("https://real-time-chat-web-application.herokuapp.com"),M=function(){var e=Object(n.useState)({}),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){N.on("userLoggedIn",(function(e){c((function(t){return Object(_.a)({},e)}))})),N.on("userLoggedOut",(function(e){c((function(t){return Object(_.a)({},e)}))}))}),[]),r.a.createElement(S,{title:"Chats"},Object.values(a).map((function(e){return r.a.createElement(y,{key:e._id,name:e.username,active:!!e.online})})))},k=a(53),U=Object(n.createContext)({isDark:null,toggleTheme:function(){}}),A=function(e){var t=Object(n.useContext)(U),a=t.isDark,c=t.toggleTheme;return r.a.createElement("div",{className:d.a.Layout},r.a.createElement(p.a,{container:!0,spacing:0},r.a.createElement(p.a,{container:!0,item:!0,xs:2,direction:"column",className:d.a.Right},r.a.createElement(M,null),r.a.createElement(h,{className:d.a.ThemeBtn,onClick:c},a?r.a.createElement(k.a,null):r.a.createElement(k.b,null)," ",r.a.createElement("p",null,"Dark Mode"))),r.a.createElement(p.a,{item:!0,xs:10,md:10},e.children)))},L=a(19),H=a(6),D=a(85),T=a.n(D),q=a(40),B=a.n(q),Y=function(e){return r.a.createElement("div",{className:B.a.Header},r.a.createElement("img",{src:e.photo,alt:"",className:B.a.HeaderImg}),r.a.createElement("p",{className:B.a.HeaderName},e.name))},I=a(86),R=a.n(I),P=function(e){return r.a.createElement("div",{className:R.a.Msgs,ref:e.msgsRef},e.children)},z=a(25),J=a.n(z),W=function(e){var t=new Date(e.createdAt),a="".concat(t.getHours(),":").concat(t.getMinutes()),n=e.msg.replace(/((\w+:\/\/\S+)|(\w+[.:]\w+\S+))[^\s,.]/gi,(function(e){return"<a href=".concat(e,' target="_blank">').concat(e,"</a>")}));return r.a.createElement("div",{className:[J.a.Container,"recevied"===e.type?J.a.Recevied:"sent"===e.type?J.a.Sent:null].join(" ")},r.a.createElement("p",{className:J.a.Msg,dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("p",{className:J.a.Date},a))},Q=a(41),V=a.n(Q),K=a(166),$=a(87),F=function(e){return r.a.createElement("div",{className:V.a.Send},r.a.createElement(K.a,{placeholder:"Type a message...",className:V.a.SendTextarea,value:e.msg,onChange:function(t){return e.setMsg(t.target.value)},onKeyDown:function(t){13!==t.keyCode||t.shiftKey||(t.preventDefault(),e.sendMsgHandler())}}),r.a.createElement(h,{onClick:e.sendMsgHandler,className:V.a.SendBtn},r.a.createElement($.a,null)))},G=Object(n.createContext)(null),X=a(88),Z=a.n(X).a.create({baseURL:"https://real-time-chat-web-application.herokuapp.com/",withCredentials:!0}),ee=a(89),te=a.n(ee),ae=a(90),ne=a.n(ae),re=function(){return r.a.createElement("div",{className:ne.a.loader},"Loading...")},ce=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useContext)(G).user,o=Object(n.useState)([]),m=Object(u.a)(o,2),d=m[0],p=m[1],f=Object(L.g)().username,g=Object(n.useState)(!1),h=Object(u.a)(g,2),E=h[0],b=h[1],v=Object(n.useRef)(null);Object(n.useEffect)((function(){v.current.scrollTop=v.current.scrollHeight}),[d]),Object(n.useEffect)((function(){N.on("connect",(function(){console.log("connected to server")})),N.on("newMessage",(function(e){p((function(t){return[].concat(Object(H.a)(t),[e])}))})),N.on("disconnect",(function(){console.log("disconnected from server")}))}),[]),Object(n.useEffect)((function(){N.emit("join",Object(_.a)({},s,{to:f}))}),[s,f]);var j=Object(n.useCallback)(Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,Z.post("api/v1/messages",{toUsername:f,fromUsername:s.username},{withCredentials:!0});case 4:t=e.sent,p(t.data.data.messages),b(!1),v.current.scrollTop=v.current.scrollHeight,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.response),b(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),[s.username,f]);Object(n.useEffect)((function(){j()}),[j]);var y;return y=d.map((function(e){return r.a.createElement(W,{key:te()(),createdAt:e.createdAt,type:e.from===s._id?"sent":"recevied",msg:e.message})})),r.a.createElement("div",{className:T.a.Chat},r.a.createElement(Y,{photo:O.a,name:"".concat(f)}),r.a.createElement(P,{setMsgs:p,msgs:d,msgsRef:v},E?r.a.createElement(re,null):y),r.a.createElement(F,{sendMsgHandler:function(){if(0!==a.trim().length&&(N.emit("createMsg",{message:a,to:f,from:s._id,username:s.username,createdAt:Date.now()}),p((function(e){return[].concat(Object(H.a)(e),[{message:a,from:s._id,createdAt:Date.now()}])})),c(""),"AdminBot"===f)){var e=["welcome to my small chat app \ud83d\ude03 take a look at my github : https://github.com/zyadelhady       \nand you can contact me with my email : zyade40@gmail.com","hi nice to have you here \ud83d\ude4b","you should see my github : https://github.com/zyadelhady","you can contact me now at zyade40@gmail.com \ud83d\ude09","hello, my name is zyad i made this chat app for any question you can email me at zyade40@gmail.com or see my github : https://github.com/zyadelhady","welcome to my chat app take a good look :)"][Math.floor(5*Math.random()+1)];N.emit("createMsg",{message:e,to:s.username,from:"5e8c71f6df24a000174af375",username:"AdminBot",createdAt:Date.now()}),p((function(t){return[].concat(Object(H.a)(t),[{message:e,from:"5e8c71f6df24a000174af375",createdAt:Date.now()}])}))}},msg:a,setMsg:c}))},se=a(20),oe=a.n(se),le=a(91),ie=a.n(le),ue=function(e){return r.a.createElement("input",{type:e.type,placeholder:e.placeholder,name:e.name,className:[ie.a.Input,e.className].join(" "),ref:e.refrence})},me=a(167),de=a(38),pe=function(e){var t=Object(de.a)(),a=t.register,c=t.handleSubmit,s=t.errors,o=Object(n.useState)(""),m=Object(u.a)(o,2),d=m[0],p=m[1],f=Object(L.f)(),g=Object(n.useState)(!1),_=Object(u.a)(g,2),E=_[0],b=_[1],j=Object(n.useContext)(G).setUser,O=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,Z.post("api/v1/users/signin/",t,{withCredentials:!0});case 4:a=e.sent,j(a.data.data),f.push("/"),b(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),b(!1),e.t0.response&&p(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(me.a,{maxWidth:"sm"},E||e.isAppLoading?r.a.createElement(re,null):r.a.createElement("form",{onSubmit:c(O)},r.a.createElement("div",{className:oe.a.Auth},r.a.createElement("p",{className:oe.a.AuthHeader},"Log in"),d&&r.a.createElement("p",null,d),s.email&&r.a.createElement("p",null,"Your email is required"),r.a.createElement(ue,{type:"email",placeholder:"Your E-mail",name:"email",refrence:a({required:!0,pattern:/^\S+@\S+$/i})}),s.password&&r.a.createElement("p",null,"Your password is required"),r.a.createElement(ue,{type:"password",placeholder:"Your Password",refrence:a({required:!0}),name:"password"}),r.a.createElement(h,null,"Submit"),r.a.createElement(v.b,{className:oe.a.Create,to:"/signup"},"Create account"))))},fe=function(){var e=Object(de.a)(),t=e.register,a=e.handleSubmit,c=e.errors,s=Object(n.useState)(""),o=Object(u.a)(s,2),m=o[0],d=o[1],p=Object(n.useContext)(G).setUser,f=Object(L.f)(),g=Object(n.useState)(!1),h=Object(u.a)(g,2),_=h[0],E=h[1],b=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,Z.post("api/v1/users/signup",t,{withCredentials:!0});case 4:a=e.sent,p(a.data.data),f.push("/"),E(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),E(!1),e.t0.response&&d(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(me.a,{maxWidth:"sm"},_?r.a.createElement(re,null):r.a.createElement("form",{onSubmit:a(b)},r.a.createElement("div",{className:oe.a.Auth},r.a.createElement("p",{className:oe.a.AuthHeader}," Sign up"),m&&r.a.createElement("p",null,m),c.username&&r.a.createElement("p",null,"Your username is required"),r.a.createElement(ue,{type:"text",placeholder:"Your Name",name:"username",refrence:t({required:!0,maxLength:80})}),c.email&&r.a.createElement("p",null,"Your email is required"),r.a.createElement(ue,{type:"email",placeholder:"Your E-mail",name:"email",refrence:t({required:!0,pattern:/^\S+@\S+$/i})}),c.password&&r.a.createElement("p",null,"Your password is required"),r.a.createElement(ue,{type:"password",placeholder:"Your Password",refrence:t({required:!0}),name:"password"}),c.passwordConfirm&&r.a.createElement("p",null,"Your password confirm is required"),r.a.createElement(ue,{type:"password",placeholder:"Confrim Your Password",refrence:t({required:!0}),name:"passwordConfirm"}),r.a.createElement(ue,{type:"submit"}),r.a.createElement(v.b,{className:oe.a.Create,to:"/login"},"sign in"))))},ge=function(){var e=Object(n.useContext)(G).user,t=Object(L.f)();return Object(n.useEffect)((function(){e||t.push("/login")}),[e,t]),Object(n.useEffect)((function(){e&&N.emit("loggedIn",{user:e})}),[e]),r.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("h1",null,"Select User"))};var he=function(){var e=Object(n.useContext)(G),t=e.user,a=e.setUser,c=Object(n.useState)(!1),s=Object(u.a)(c,2),o=s[0],m=s[1],d=Object(L.f)(),p=Object(n.useContext)(U).isDark;Object(n.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,Z.get("api/v1/users/me/",{withCredentials:!0});case 4:t=e.sent,a(t.data.data.data),d.push("/"),m(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),d.push("/login"),m(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[a,d]);var f=r.a.createElement(A,null,r.a.createElement(L.c,null,r.a.createElement(L.a,{exact:!0,path:"/"},r.a.createElement(ge,null)),r.a.createElement(L.a,{path:"/:username"},r.a.createElement(ce,null))));return t||(f=r.a.createElement("div",{style:{height:"100vh",display:"flex",alignItems:"center"}},r.a.createElement(L.c,null,r.a.createElement(L.a,{exact:!0,path:"/"},r.a.createElement(ge,null)),r.a.createElement(L.a,{path:"/login"},r.a.createElement(pe,{isAppLoading:o})),r.a.createElement(L.a,{path:"/signup"},r.a.createElement(fe,null))))),r.a.createElement("div",{className:["App",p?"Dark":"Light"].join(" ")},f)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(null),l=Object(u.a)(o,2),i=l[0],m=l[1];return r.a.createElement(G.Provider,{value:{user:c,setUser:s,onlineUsers:i,setOnlineUsers:m}},e.children)},Ee=function(e){var t=localStorage.getItem("isDark"),a=Object(n.useState)(!t||JSON.parse(t)),c=Object(u.a)(a,2),s=c[0],o=c[1];return r.a.createElement(U.Provider,{value:{isDark:s,toggleTheme:function(){return o((function(e){return localStorage.setItem("isDark",JSON.stringify(!e)),!e}))}}},e.children)},be=r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null,r.a.createElement(Ee,null,r.a.createElement(v.a,null,r.a.createElement(he,null)))));s.a.render(be,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,a){e.exports={Auth:"Auth_Auth__3m_4p",AuthHeader:"Auth_AuthHeader__vfcRw",Create:"Auth_Create__1TwzY"}},21:function(e,t,a){e.exports={Usr:"User_Usr__1N2d5",UsrPic:"User_UsrPic__3YLoJ",UsrPicActive:"User_UsrPicActive__1XguQ",MsgUser:"User_MsgUser__1tJmG",MsgUserName:"User_MsgUserName__2BMHN",MsgUserMsg:"User_MsgUserMsg__b6sVK"}},25:function(e,t,a){e.exports={Container:"ChatMessage_Container__2EyL3",Msg:"ChatMessage_Msg__3LY8i",Recevied:"ChatMessage_Recevied__3GRVk",Sent:"ChatMessage_Sent__QgQHd",Date:"ChatMessage_Date__1pBgi"}},33:function(e,t,a){e.exports=a.p+"static/media/jeffrey_000.1dad94d1.png"},39:function(e,t,a){e.exports={Layout:"Layout_Layout__29AnV",Right:"Layout_Right____aEy",Left:"Layout_Left__673DC",Logout:"Layout_Logout__3qDkE",ThemeBtn:"Layout_ThemeBtn__24AWE"}},40:function(e,t,a){e.exports={Header:"Header_Header__3TkOW",HeaderImg:"Header_HeaderImg__1jBaX",HeaderName:"Header_HeaderName__2qswQ"}},41:function(e,t,a){e.exports={Send:"ChattingSend_Send__1cJMD",SendTextarea:"ChattingSend_SendTextarea__1ea15",SendBtn:"ChattingSend_SendBtn__2L2Ea"}},51:function(e,t,a){e.exports={Container:"SideContainer_Container__1U-07",ContainerTitle:"SideContainer_ContainerTitle__2L0dM"}},79:function(e,t,a){e.exports={Btn:"Button_Btn__1qtoQ"}},85:function(e,t,a){e.exports={Chat:"Chatting_Chat__2VSRt"}},86:function(e,t,a){e.exports={Msgs:"ChattingMessages_Msgs__24DdN"}},90:function(e,t,a){e.exports={loader:"Spinner_loader__3hq-k",load8:"Spinner_load8__1FmgA"}},91:function(e,t,a){e.exports={Input:"Input_Input__3lFYk"}},93:function(e,t,a){e.exports=a(153)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.808cafa2.chunk.js.map